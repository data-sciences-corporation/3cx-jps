{
    "type": "install",
    "version": "0.6.1",
    "id": "threeCx",
    "baseUrl": "https://raw.githubusercontent.com/data-sciences-corporation/3cx-jps/master",
    "description":
    {
        "text": "text/description.md",
        "short": "A test deployment of 3CX"
    },
    "logo": "https://www.pinclipart.com/picdir/big/366-3669563_3cx-phone-system-logo-3cx-logo-png-clipart.png",
    "name": "3CX PBX",
    "targetRegions":
    {
        "type": "vz7"
    },
    "globals":
    {
        "password": "${fn.password(20)}"
    },
    "settings":
    {},
    "nodes":
    [
        {
            "cloudlets": 16,
            "nodeType": "dockerengine",
            "nodeGroup": "3cx",
            "extip": true,
            "count": "1",
            "env":
            {
                "JELASTIC_PORTS": "443, 5001, 5015, 5060, 5061, 5090, 2528"
            }
        }
    ],
    "onInstall":
    [
        "deploy3cx"
    ],
    "actions":
    {
        "deploy3cx":
        {
            "cmd [3cx]":
            [
                "echo Deploying 3CX instance > INSTALL_LOG",
                "curl -fsS https://raw.githubusercontent.com/data-sciences-corporation/3cx-jps/main/scripts/deploy3cx.sh | sh -s '${nodes.3cx[0].url}' '${nodes.3cx[0].address}' "
            ]
        }
    },
    "skipNodeEmails": "true",
    "success": "text/success.md"
}
